{% extends 'base.html.twig' %}
{% block title %}Listado de Productos y Servicios{% endblock %}

{% block body %}
<div class="container mt-4">
    <div class="d-flex justify-content-center align-items-center mb-3">
        <h1>Conceptos de Facturación</h1>

    </div>

{% for label, messages in app.flashes %}
    {% for message in messages %}
        <div class="alert alert-{{ label == 'success' ? 'success' : 'danger' }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}
{% endfor %}

    <a href="{{ path('producto_servicio_create') }}" class="btn btn-primary" style="margin-bottom: 1rem;">
        <i class="bi bi-plus-circle"></i> Nuevo Producto/Servicio
    </a>
    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-striped table-hover align-middle">
                    <thead class="table-light">
                        <tr>
                            <th scope="col">Tipo</th>
                            <th scope="col">Rubro</th>
                            <th scope="col">Código</th>
                            <th scope="col">Producto / Servicio</th>
                            <th scope="col">Unidad de Medida</th>
                            <th scope="col">Condición de IVA</th>
                            <th scope="col">Precio Unitario</th>
                            <th scope="col">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for producto in productoServicios %}
                            <tr>
                                <td><span class="badge bg-secondary" data-bs-toggle="tooltip" data-bs-placement="right" >{{ producto.tipo ? producto.tipo.value : '' }}</span></td> 
                                <td>{{ producto.rubro.rubro }}</td>
                                <td>{{ producto.codigo }}</td>
                                <td>{{ producto.productoServicio }}</td>
                                <td>{{ producto.unidadMedida.unidadMedida }}</td>
                                <td>{{ producto.condicionIva.condicionIva }}</td>
                                <td>{{ producto.precioBrutoUnitario }}</td>

                                <td>
                                    <a href="{{ path('producto_servicio_update', {codigo: producto.codigo}) }}" class="btn btn-sm btn-outline-secondary" title="Editar">
                                        <i class="bi bi-pencil"></i>
                                    </a>
                                    {# <a href="#" class="btn btn-sm btn-outline-danger" title="Eliminar">
                                        <i class="bi bi-trash"></i>
                                    </a> #}
                                </td>
                            </tr>
                        {% else %}
                                <td colspan="8" class="text-center text-muted py-4">
                                    No se encontraron registros.
                                </td>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    {% include 'producto_servicio/contador_registros.html.twig' %}
</div>
{% endblock %}